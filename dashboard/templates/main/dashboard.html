{% extends 'offcanvas.html' %}
{% load bootstrap5 %}
{% load static %}
{% block main %}

<section>
    <div class="content-wrapper general-bg">
        <div class="row" id="proBanner">
            <div class="col-md-12">
                <span class="d-flex align-items-center purchase-popup">
                    <img src="../../../static/img/logo/fav.png" width="70px" class="img-fluid" alt="" srcset="">
                </span>
            </div>
        </div>
        <div class="d-xl-flex justify-content-between align-items-start">
            <h2 class="text-dark font-weight-bold mb-2"> Overview dashboard </h2>
            <div class="d-sm-flex justify-content-xl-between align-items-center mb-2">
                <div class="dropdown ml-0 ml-md-4 mt-2 mt-lg-0">
                    <button class="btn bg-white dropdown-toggle p-3 d-flex align-items-center" type="button"
                        id="dropdownMenuButton1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="mdi mdi-calendar mr-1"></i>{{today}}
                    </button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="card h-100 summ-cards">
                    <div class="card-title">
                        Human Resource Summary
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="c-content c1">
                                    <h6>Leave Requests</h6>
                                    <small>3</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="c-content c2">
                                    <h6>Training Requests</h6>
                                    <small>3</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="c-content">
                                    <h6>Loan Requests</h6>
                                    <small>3</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 summ-cards2">
                    <div class="card-title">
                        Procurement Summary
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="c-content c1">
                                    <h6>Store Requests</h6>
                                    <small>3</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="c-content">
                                    <h6>Purchase Requests</h6>
                                    <small>3</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 summ-cards3">
                    <div class="card-title">
                        Finance Summary
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="c-content c1">
                                    <h6>Imprest Requisition</h6>
                                    <small>3</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="c-content c2">
                                    <h6>Imprest Surrender</h6>
                                    <small>3</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="c-content">
                                    <h6>Staff Claim</h6>
                                    <small>3</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row py-4">
            <div class="col-md-6">
                <div class="card p-3 h-100" style="background: #d9e3f0;">
                    <div class="card-title text-dark">
                        <h6>Approved Requests</h6>
                    </div>
                    <div class="card-body">
                        <canvas id="myChart"></canvas>
                    </div>
                    <script>
                        const labels = [
                            'Leave',
                            'Training',
                            'Loan',
                            'Store',
                            'Purchase',
                            'Repair',
                            'Imprest Requisition',
                            'Imprest Surrender',
                            "Staff Claim"
                        ];
                        var Approved_Leave = 3
                        var App_Train = 3
                        var APP_Loan = 3
                        var App_imprest = 3
                        var App_surrender = 3
                        const data = {
                            labels: labels,
                            datasets: [{
                                label: 'All Approved Requests',
                                backgroundColor: 'rgb(255, 99, 132)',
                                borderColor: 'rgb(255, 99, 132)',
                                data: [Approved_Leave, App_Train, APP_Loan, 3, 20, 30, 45,
                                    App_imprest, App_surrender, 3
                                ],
                            }]
                        };

                        const config = {
                            type: 'line',
                            data: data,
                            options: {}
                        };
                    </script>
                    <script>
                        const myChart = new Chart(
                            document.getElementById('myChart'),
                            config
                        );
                    </script>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card p-3 h-100" style="background: #CCCCFF;">
                    <div class="card-title text-dark">
                        <h6>Rejected Requests</h6>
                    </div>
                    <div class="card-body">
                        <canvas id="Chart2"></canvas>
                    </div>
                    <script>
                        const newlabel = [
                            'Leave',
                            'Training',
                            'Loan',
                            'Store',
                            'Purchase',
                            'Repair',
                            'Imprest Requisition',
                            'Imprest Surrender',
                            "Staff Claim"
                        ];

                        var Rejected_Leave = 3
                        var Rej_Train = 3
                        var Rej_Loan = 3
                        var Rej_imprest = 3
                        var Rej_surrender = 3
                        const data2 = {
                            labels: newlabel,
                            datasets: [{
                                label: 'All Rejected Requests',
                                backgroundColor: [
                                    '#ff5e6c',
                                    '#DFFF00',
                                    '#8076a3',
                                    '#FFBF00',
                                    '#9FE2BF',
                                    '#40E0D0',
                                ],
                                borderColor: 'rgb(255, 99, 132)',
                                data: [Rejected_Leave, Rej_Train, Rej_Loan, 2, 20, 8, 5, Rej_imprest,
                                    Rej_surrender, 3
                                ],
                            }]
                        };

                        const configs = {
                            type: 'bar',
                            data: data2,
                            options: {}
                        };
                    </script>
                    <script>
                        const Chart2 = new Chart(
                            document.getElementById('Chart2'),
                            configs
                        );
                    </script>
                </div>
            </div>
        </div>
        <div class="row pb-3">
            <div class="col-md-8">
                <div class="card h-100">
                    <div class="row my-2 ">
                        <div class="col-md-12">
                            <div class="card h-100 px-2" id="d-card">
                                <div class="m-4">
                                    <ul class="nav nav-tabs" id="myTab">
                                        <li class="nav-item">
                                            <a href="#home" class="nav-link active" data-bs-toggle="tab">Documents
                                                Pending
                                                Your
                                                Approval
                                                ({{countsAPP}})</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane fade show active" id="home">
                                            <h4 class="mt-2 text-dark">Documents Pending Your Approval</h4>
                                            <div class="card-body">
                                                <table id="example"
                                                    class="display table table-striped table-bordered dt-responsive table-responsive-lg"
                                                    style="width:100%">
                                                    <thead>
                                                        <tr id="tops">
                                                            <th>Document Type</th>
                                                            <th>Sender</th>
                                                            <th>Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for res in apps %}
                                                        <tr>
                                                            <td id="rap">{{res.Document_Type}}</td>
                                                            <td>{{res.Sender_ID}}</td>
                                                            <td>
                                                                <a href="{% url 'ApproveData' res.Document_No_ %}"
                                                                    class="btn btn-success link-btn" type="button"
                                                                    data-toggle="tooltip" data-placement="top"
                                                                    title="View"><i class="fa fa-table"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="muck-up" style="border-radius: 4px;">
                    <div class="overlay"></div>
                    <div class="top">
                        <div class="navs">
                            <span class="ion-android-menu"></span>
                            <p>My Profile</p>
                        </div>
                        <div class="user-profile">
                            <img src="../../../static/img/logo/2.png">
                            <div class="user-details">
                                <h4>{{full}}</h4>
                                <p>{{Responsibility}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="bottom">
                        <div class="title">
                            <h3>My Profile</h3>
                            <small>Profile Information</small>
                        </div>
                        <ul class="tasks">
                            <li class="one red">
                                <span class="task-title">Employee Number</span>
                                <span class="task-time"><i class="las la-user-circle"></i></span>
                                <span class="task-cat">{{Employee_No_}}</span>

                            </li>
                            <li class="one red">
                                <span class="task-title">Account Number</span>
                                <span class="task-time"><i class="las la-lock"></i></span>
                                <span class="task-cat">{{Customer_No_}}</span>

                            </li>
                            <li class="two green">
                                <span class="task-title">Email</span>
                                <span class="task-time"><i class="las la-envelope"></i></span>
                                {% if E_Mail %}
                                <span class="task-cat">{{E_Mail}}</span>
                                {% else %}
                                <span class="task-cat">No Email</span>
                                {% endif %}
                            </li>
                            </li>


                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}